<h2>Results index</h2>


<table class='table table-hover table-inverse'>
  <% if @range == "Book" %>
    <thead>
      <tr>
        <th></th>
        <th>Title</th>
        <th>Opinion</th>
        <th>Favorites</th>
        <th>Comments</th>
        <th colspan="3"></th>
      </tr>
    </thead>
    <tbody>
      <% @book_all.each do |book| %>
        <tr>
          <td>
            <%= link_to user_path(book.user.id) do %>
              <%= attachment_image_tag book.user, :profile_image, format: "jpeg", fallback: "no_image.jpg", size:"50x50" %>
            <% end %>
          </td>
          <td>
            <%= link_to book_path(book.id) do %>
              <%= book.title %>
            <% end %>
          </td>
          <td><%= book.body %></td>
          <td>
            <% if book.favorited_by?(current_user) %>
              <%= link_to book_favorites_path(book), method: :delete do %>
                <i class="fas fa-heart"></i><%= book.favorites.count %>
              <% end %>
            <% else %>
              <%= link_to book_favorites_path(book), method: :post do %>
                <i class="far fa-heart"></i><%= book.favorites.count %>
              <% end %>
            <% end %>
          </td>
          <td>コメント数: <%= book.book_comments.count %></td>
        </tr>
      <% end %>
    </tbody>
  <% elsif @range == "User" %>
    <thead>
      <tr>
        <th></th>
        <th>Name</th>
        <th>Followings</th>
        <th>Followers</th>
        <th colspan="3"></th>
      </tr>
    </thead>
    <tbody>
      <% @user_all.each do |user| %>
        <tr>
          <td>
            <%= attachment_image_tag user, :profile_image, format: "jpeg", fallback: "no_image.jpg", size:"50x50" %>
          </td>
          <td>
            <%= user.name %>
          </td>
          <td>
            フォロー数: <%= user.followings.count %>
          </td>
          <td>
            フォロワー数: <%= user.followers.count %>
          </td>
          <td>
            <td>
              <% if current_user != user %>
                <% if current_user.following?(user) %>
                  <%= link_to "フォロー外す", user_relationships_path(user.id), method: :delete %>
                <% else %>
                  <%= link_to "フォローする", user_relationships_path(user.id), method: :post %>
                <% end %>
              <% end %>
            </td>
          </td>
          <td><%= link_to "Show", user_path(user.id) %></td>
        </tr>
      <% end %>
    </tbody>
  <% end %>
</table>